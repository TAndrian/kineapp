{"remainingRequest":"/home/lost/Bureau/OCI/kineapp/node_modules/babel-loader/lib/index.js!/home/lost/Bureau/OCI/kineapp/node_modules/eslint-loader/index.js??ref--14-0!/home/lost/Bureau/OCI/kineapp/src/router/index.js","dependencies":[{"path":"/home/lost/Bureau/OCI/kineapp/src/router/index.js","mtime":1641910782761},{"path":"/home/lost/Bureau/OCI/kineapp/babel.config.js","mtime":1641732054737},{"path":"/home/lost/Bureau/OCI/kineapp/node_modules/cache-loader/dist/cjs.js","mtime":1640273572679},{"path":"/home/lost/Bureau/OCI/kineapp/node_modules/babel-loader/lib/index.js","mtime":1639687650488},{"path":"/home/lost/Bureau/OCI/kineapp/node_modules/eslint-loader/index.js","mtime":1640273580552}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCB7IGNyZWF0ZVJvdXRlciwgY3JlYXRlV2ViSGFzaEhpc3RvcnkgfSBmcm9tICJ2dWUtcm91dGVyIjsKaW1wb3J0IENvbm5leGlvbiBmcm9tICIuLi92aWV3cy9Db25uZXhpb24udnVlIjsKaW1wb3J0IEhvbWVQYWdlS2luZSBmcm9tICIuLi92aWV3cy9Ib21lUGFnZUtpbmUudnVlIjsKaW1wb3J0IEhvbWVQYWdlUGF0aWVudCBmcm9tICIuLi92aWV3cy9Ib21lUGFnZVBhdGllbnQudnVlIjsKaW1wb3J0IEVEVCBmcm9tICIuLi92aWV3cy9FRFQudnVlIjsKaW1wb3J0IEV4ZXJjaWNlIGZyb20gIi4uL3ZpZXdzL0V4ZXJjaWNlLnZ1ZSI7CmltcG9ydCBQYXRpZW50IGZyb20gIi4uL3ZpZXdzL1BhdGllbnQudnVlIjsKaW1wb3J0IFJEViBmcm9tICIuLi92aWV3cy9SRFYudnVlIjsKaW1wb3J0IFJlZ2lzdGVyIGZyb20gIi4uL2NvbXBvbmVudHMvUmVnaXN0ZXIudnVlIjsKaW1wb3J0IExvZ2luIGZyb20gIi4uL2NvbXBvbmVudHMvTG9naW4udnVlIjsKaW1wb3J0IGZpcmViYXNlIGZyb20gImZpcmViYXNlIjsKdmFyIHJvdXRlcyA9IFt7CiAgcGF0aDogIi8iLAogIG5hbWU6ICJDb25uZXhpb24iLAogIGNvbXBvbmVudDogQ29ubmV4aW9uCn0sIHsKICBwYXRoOiAiL1JlZ2lzdGVyIiwKICBuYW1lOiAiUmVnaXN0ZXIiLAogIGNvbXBvbmVudDogUmVnaXN0ZXIsCiAgbWV0YTogewogICAgZ3Vlc3Q6IHRydWUKICB9Cn0sIHsKICBwYXRoOiAiL0xvZ2luIiwKICBuYW1lOiAiTG9naW4iLAogIGNvbXBvbmVudDogTG9naW4sCiAgbWV0YTogewogICAgZ3Vlc3Q6IHRydWUKICB9Cn0sIHsKICBwYXRoOiAiL0hvbWVQYWdlS2luZSIsCiAgbmFtZTogIkhvbWVQYWdlS2luZSIsCiAgY29tcG9uZW50OiBIb21lUGFnZUtpbmUsCiAgbWV0YTogewogICAgYXV0aDogdHJ1ZQogIH0sCiAgY2hpbGRyZW46IFt7CiAgICBwYXRoOiAiL1JEViIsCiAgICBuYW1lOiAiUkRWIiwKICAgIGNvbXBvbmVudDogUkRWCiAgfSwgewogICAgcGF0aDogIi9Ib21lUGFnZUtpbmUvRURUIiwKICAgIG5hbWU6ICJFRFQiLAogICAgY29tcG9uZW50OiBFRFQKICB9LCB7CiAgICBwYXRoOiAiL0V4ZXJjaWNlIiwKICAgIG5hbWU6ICJFeGVyY2ljZSIsCiAgICBjb21wb25lbnQ6IEV4ZXJjaWNlCiAgfSwgewogICAgcGF0aDogIi9QYXRpZW50IiwKICAgIG5hbWU6ICJQYXRpZW50IiwKICAgIGNvbXBvbmVudDogUGF0aWVudAogIH1dCn0sIHsKICBwYXRoOiAiL0hvbWVQYWdlUGF0aWVudCIsCiAgbmFtZTogIkhvbWVQYWdlUGF0aWVudCIsCiAgY29tcG9uZW50OiBIb21lUGFnZVBhdGllbnQsCiAgbWV0YTogewogICAgYXV0aDogdHJ1ZQogIH0KfV07CnZhciByb3V0ZXIgPSBjcmVhdGVSb3V0ZXIoewogIGhpc3Rvcnk6IGNyZWF0ZVdlYkhhc2hIaXN0b3J5KCksCiAgcm91dGVzOiByb3V0ZXMKfSk7CnJvdXRlci5iZWZvcmVFYWNoKGZ1bmN0aW9uICh0bywgX2Zyb20sIG5leHQpIHsKICBmaXJlYmFzZS5hdXRoKCkub25BdXRoU3RhdGVDaGFuZ2VkKGZ1bmN0aW9uICh1c2VyQXV0aCkgewogICAgaWYgKHVzZXJBdXRoKSB7CiAgICAgIGZpcmViYXNlLmF1dGgoKS5jdXJyZW50VXNlci5nZXRJZFRva2VuUmVzdWx0KCkudGhlbihmdW5jdGlvbiAoX3JlZikgewogICAgICAgIHZhciBjbGFpbXMgPSBfcmVmLmNsYWltczsKCiAgICAgICAgaWYgKGNsYWltcy5wYXRpZW50KSB7CiAgICAgICAgICBpZiAodG8ucGF0aCAhPT0gIi9Ib21lUGFnZVBhdGllbnQiKSByZXR1cm4gbmV4dCh7CiAgICAgICAgICAgIHBhdGg6ICIvSG9tZVBhZ2VQYXRpZW50IgogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIGlmIChjbGFpbXMuYWRtaW4pIHsKICAgICAgICAgIGlmICh0by5wYXRoICE9PSAiL0hvbWVQYWdlS2luZSIpIHJldHVybiBuZXh0KHsKICAgICAgICAgICAgcGF0aDogIi9Ib21lUGFnZUtpbmUiCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgaWYgKHRvLm1hdGNoZWQuc29tZShmdW5jdGlvbiAocmVjb3JkKSB7CiAgICAgICAgcmV0dXJuIHJlY29yZC5tZXRhLmF1dGg7CiAgICAgIH0pKSB7CiAgICAgICAgbmV4dCh7CiAgICAgICAgICBwYXRoOiAiL0xvZ2luIiwKICAgICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICAgIHJlZGlyZWN0OiB0by5mdWxsUGF0aAogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIG5leHQoKTsKICAgICAgfQogICAgfQogIH0pOwogIG5leHQoKTsKfSk7CmV4cG9ydCBkZWZhdWx0IHJvdXRlcjs="},{"version":3,"sources":["/home/lost/Bureau/OCI/kineapp/src/router/index.js"],"names":["createRouter","createWebHashHistory","Connexion","HomePageKine","HomePagePatient","EDT","Exercice","Patient","RDV","Register","Login","firebase","routes","path","name","component","meta","guest","auth","children","router","history","beforeEach","to","_from","next","onAuthStateChanged","userAuth","currentUser","getIdTokenResult","then","claims","patient","admin","matched","some","record","query","redirect","fullPath"],"mappings":"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","sourcesContent":["import { createRouter, createWebHashHistory } from \"vue-router\";\nimport Connexion from \"../views/Connexion.vue\";\nimport HomePageKine from \"../views/HomePageKine.vue\";\nimport HomePagePatient from \"../views/HomePagePatient.vue\";\nimport EDT from \"../views/EDT.vue\";\nimport Exercice from \"../views/Exercice.vue\";\nimport Patient from \"../views/Patient.vue\";\nimport RDV from \"../views/RDV.vue\";\n\nimport Register from \"../components/Register.vue\";\nimport Login from \"../components/Login.vue\";\nimport firebase from \"firebase\";\n\nconst routes = [\n  {\n    path: \"/\",\n    name: \"Connexion\",\n    component: Connexion,\n  },\n  {\n    path: \"/Register\",\n    name: \"Register\",\n    component: Register,\n    meta: {\n      guest: true,\n    },\n  },\n\n  {\n    path: \"/Login\",\n    name: \"Login\",\n    component: Login,\n    meta: {\n      guest: true,\n    },\n  },\n\n  {\n    path: \"/HomePageKine\",\n    name: \"HomePageKine\",\n    component: HomePageKine,\n    meta: {\n      auth: true,\n    },\n    children: [\n      {\n        path: \"/RDV\",\n        name: \"RDV\",\n        component: RDV,\n      },\n      {\n        path: \"/HomePageKine/EDT\",\n        name: \"EDT\",\n        component: EDT,\n      },\n      {\n        path: \"/Exercice\",\n        name: \"Exercice\",\n        component: Exercice,\n      },\n      {\n        path: \"/Patient\",\n        name: \"Patient\",\n        component: Patient,\n      },\n    ],\n  },\n\n  {\n    path: \"/HomePagePatient\",\n    name: \"HomePagePatient\",\n    component: HomePagePatient,\n    meta: {\n      auth: true,\n    },\n  },\n];\n\nconst router = createRouter({\n  history: createWebHashHistory(),\n  routes,\n});\n\nrouter.beforeEach((to, _from, next) => {\n  firebase.auth().onAuthStateChanged((userAuth) => {\n    if (userAuth) {\n      firebase\n        .auth()\n        .currentUser.getIdTokenResult()\n        .then(function ({ claims }) {\n          if (claims.patient) {\n            if (to.path !== \"/HomePagePatient\")\n              return next({\n                path: \"/HomePagePatient\",\n              });\n          } else if (claims.admin) {\n            if (to.path !== \"/HomePageKine\")\n              return next({\n                path: \"/HomePageKine\",\n              });\n          }\n        });\n    } else {\n      if (to.matched.some((record) => record.meta.auth)) {\n        next({\n          path: \"/Login\",\n          query: {\n            redirect: to.fullPath,\n          },\n        });\n      } else {\n        next();\n      }\n    }\n  });\n\n  next();\n});\n\nexport default router;\n"]}]}