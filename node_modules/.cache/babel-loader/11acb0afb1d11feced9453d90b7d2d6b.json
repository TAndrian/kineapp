{"remainingRequest":"/home/lost/Bureau/OCI/kineapp/node_modules/babel-loader/lib/index.js!/home/lost/Bureau/OCI/kineapp/node_modules/eslint-loader/index.js??ref--14-0!/home/lost/Bureau/OCI/kineapp/src/router/index.js","dependencies":[{"path":"/home/lost/Bureau/OCI/kineapp/src/router/index.js","mtime":1641918236369},{"path":"/home/lost/Bureau/OCI/kineapp/babel.config.js","mtime":1641732054737},{"path":"/home/lost/Bureau/OCI/kineapp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/lost/Bureau/OCI/kineapp/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/lost/Bureau/OCI/kineapp/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCB7IGNyZWF0ZVJvdXRlciwgY3JlYXRlV2ViSGFzaEhpc3RvcnkgfSBmcm9tICJ2dWUtcm91dGVyIjsgLy9pbXBvcnQgQ29ubmV4aW9uIGZyb20gIi4uL3ZpZXdzL0Nvbm5leGlvbi52dWUiOwoKaW1wb3J0IEhvbWVQYWdlS2luZSBmcm9tICIuLi92aWV3cy9Ib21lUGFnZUtpbmUudnVlIjsKaW1wb3J0IEhvbWVQYWdlUGF0aWVudCBmcm9tICIuLi92aWV3cy9Ib21lUGFnZVBhdGllbnQudnVlIjsKaW1wb3J0IEVEVCBmcm9tICIuLi92aWV3cy9FRFQudnVlIjsKaW1wb3J0IEV4ZXJjaWNlIGZyb20gIi4uL3ZpZXdzL0V4ZXJjaWNlLnZ1ZSI7CmltcG9ydCBQYXRpZW50IGZyb20gIi4uL3ZpZXdzL1BhdGllbnQudnVlIjsKaW1wb3J0IFJEViBmcm9tICIuLi92aWV3cy9SRFYudnVlIjsKaW1wb3J0IFBhZ2VQYXRpZW50Rm9ybXVsYWlyZSBmcm9tICIuLi92aWV3cy9QYWdlUGF0aWVudEZvcm11bGFpcmUudnVlIjsgLy9pbXBvcnQgUmVnaXN0ZXIgZnJvbSAiLi4vY29tcG9uZW50cy9SZWdpc3Rlci52dWUiOwovL2ltcG9ydCBMb2dpbiBmcm9tICIuLi9jb21wb25lbnRzL0xvZ2luLnZ1ZSI7CgppbXBvcnQgZmlyZWJhc2UgZnJvbSAiZmlyZWJhc2UiOwp2YXIgcm91dGVzID0gWwovKiB7CiAgcGF0aDogIi8iLAogIG5hbWU6ICJDb25uZXhpb24iLAogIGNvbXBvbmVudDogQ29ubmV4aW9uLAp9LAp7CiAgcGF0aDogIi9SZWdpc3RlciIsCiAgbmFtZTogIlJlZ2lzdGVyIiwKICBjb21wb25lbnQ6IFJlZ2lzdGVyLAogIG1ldGE6IHsKICAgIGd1ZXN0OiB0cnVlLAogIH0sCn0sCiB7CiAgcGF0aDogIi9Mb2dpbiIsCiAgbmFtZTogIkxvZ2luIiwKICBjb21wb25lbnQ6IExvZ2luLAogIG1ldGE6IHsKICAgIGd1ZXN0OiB0cnVlLAogIH0sCn0sKi8KewogIHBhdGg6ICIvIiwKICBuYW1lOiAiUGFnZVBhdGllbnRGb3JtdWxhaXJlIiwKICBjb21wb25lbnQ6IFBhZ2VQYXRpZW50Rm9ybXVsYWlyZQp9LCB7CiAgcGF0aDogIi9Ib21lUGFnZUtpbmUiLAogIG5hbWU6ICJIb21lUGFnZUtpbmUiLAogIGNvbXBvbmVudDogSG9tZVBhZ2VLaW5lLAogIG1ldGE6IHsKICAgIGF1dGg6IHRydWUKICB9LAogIGNoaWxkcmVuOiBbewogICAgcGF0aDogIi9SRFYiLAogICAgbmFtZTogIlJEViIsCiAgICBjb21wb25lbnQ6IFJEVgogIH0sIHsKICAgIHBhdGg6ICIvRURUIiwKICAgIG5hbWU6ICJFRFQiLAogICAgY29tcG9uZW50OiBFRFQKICB9LCB7CiAgICBwYXRoOiAiL0V4ZXJjaWNlIiwKICAgIG5hbWU6ICJFeGVyY2ljZSIsCiAgICBjb21wb25lbnQ6IEV4ZXJjaWNlCiAgfSwgewogICAgcGF0aDogIi9QYXRpZW50IiwKICAgIG5hbWU6ICJQYXRpZW50IiwKICAgIGNvbXBvbmVudDogUGF0aWVudAogIH1dCn0sIHsKICBwYXRoOiAiL0hvbWVQYWdlUGF0aWVudCIsCiAgbmFtZTogIkhvbWVQYWdlUGF0aWVudCIsCiAgY29tcG9uZW50OiBIb21lUGFnZVBhdGllbnQsCiAgbWV0YTogewogICAgYXV0aDogdHJ1ZQogIH0KfV07CnZhciByb3V0ZXIgPSBjcmVhdGVSb3V0ZXIoewogIGhpc3Rvcnk6IGNyZWF0ZVdlYkhhc2hIaXN0b3J5KCksCiAgcm91dGVzOiByb3V0ZXMKfSk7CnJvdXRlci5iZWZvcmVFYWNoKGZ1bmN0aW9uICh0bywgX2Zyb20sIG5leHQpIHsKICBmaXJlYmFzZS5hdXRoKCkub25BdXRoU3RhdGVDaGFuZ2VkKGZ1bmN0aW9uICh1c2VyQXV0aCkgewogICAgaWYgKHVzZXJBdXRoKSB7CiAgICAgIGZpcmViYXNlLmF1dGgoKS5jdXJyZW50VXNlci5nZXRJZFRva2VuUmVzdWx0KCkudGhlbihmdW5jdGlvbiAoX3JlZikgewogICAgICAgIHZhciBjbGFpbXMgPSBfcmVmLmNsYWltczsKCiAgICAgICAgaWYgKGNsYWltcy5wYXRpZW50KSB7CiAgICAgICAgICBpZiAodG8ucGF0aCAhPT0gIi9Ib21lUGFnZVBhdGllbnQiKSByZXR1cm4gbmV4dCh7CiAgICAgICAgICAgIHBhdGg6ICIvSG9tZVBhZ2VQYXRpZW50IgogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIGlmIChjbGFpbXMuYWRtaW4pIHsKICAgICAgICAgIGlmICh0by5wYXRoICE9PSAiL0hvbWVQYWdlS2luZSIpIHJldHVybiBuZXh0KHsKICAgICAgICAgICAgcGF0aDogIi9Ib21lUGFnZUtpbmUiCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgaWYgKHRvLm1hdGNoZWQuc29tZShmdW5jdGlvbiAocmVjb3JkKSB7CiAgICAgICAgcmV0dXJuIHJlY29yZC5tZXRhLmF1dGg7CiAgICAgIH0pKSB7CiAgICAgICAgbmV4dCh7CiAgICAgICAgICBwYXRoOiAiL0xvZ2luIiwKICAgICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICAgIHJlZGlyZWN0OiB0by5mdWxsUGF0aAogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIG5leHQoKTsKICAgICAgfQogICAgfQogIH0pOwogIG5leHQoKTsKfSk7CmV4cG9ydCBkZWZhdWx0IHJvdXRlcjs="},{"version":3,"sources":["/home/lost/Bureau/OCI/kineapp/src/router/index.js"],"names":["createRouter","createWebHashHistory","HomePageKine","HomePagePatient","EDT","Exercice","Patient","RDV","PagePatientFormulaire","firebase","routes","path","name","component","meta","auth","children","router","history","beforeEach","to","_from","next","onAuthStateChanged","userAuth","currentUser","getIdTokenResult","then","claims","patient","admin","matched","some","record","query","redirect","fullPath"],"mappings":"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","sourcesContent":["import { createRouter, createWebHashHistory } from \"vue-router\";\n//import Connexion from \"../views/Connexion.vue\";\nimport HomePageKine from \"../views/HomePageKine.vue\";\nimport HomePagePatient from \"../views/HomePagePatient.vue\";\nimport EDT from \"../views/EDT.vue\";\nimport Exercice from \"../views/Exercice.vue\";\nimport Patient from \"../views/Patient.vue\";\nimport RDV from \"../views/RDV.vue\";\nimport PagePatientFormulaire from \"../views/PagePatientFormulaire.vue\";\n\n//import Register from \"../components/Register.vue\";\n//import Login from \"../components/Login.vue\";\nimport firebase from \"firebase\";\n\nconst routes = [\n  /* {\n    path: \"/\",\n    name: \"Connexion\",\n    component: Connexion,\n  },\n  {\n    path: \"/Register\",\n    name: \"Register\",\n    component: Register,\n    meta: {\n      guest: true,\n    },\n  },\n\n  {\n    path: \"/Login\",\n    name: \"Login\",\n    component: Login,\n    meta: {\n      guest: true,\n    },\n  },*/\n\n  {\n    path: \"/\",\n    name: \"PagePatientFormulaire\",\n    component: PagePatientFormulaire,\n  },\n\n  {\n    path: \"/HomePageKine\",\n    name: \"HomePageKine\",\n    component: HomePageKine,\n    meta: {\n      auth: true,\n    },\n    children: [\n      {\n        path: \"/RDV\",\n        name: \"RDV\",\n        component: RDV,\n      },\n      {\n        path: \"/EDT\",\n        name: \"EDT\",\n        component: EDT,\n      },\n      {\n        path: \"/Exercice\",\n        name: \"Exercice\",\n        component: Exercice,\n      },\n      {\n        path: \"/Patient\",\n        name: \"Patient\",\n        component: Patient,\n      },\n    ],\n  },\n\n  {\n    path: \"/HomePagePatient\",\n    name: \"HomePagePatient\",\n    component: HomePagePatient,\n    meta: {\n      auth: true,\n    },\n  },\n];\n\nconst router = createRouter({\n  history: createWebHashHistory(),\n  routes,\n});\n\nrouter.beforeEach((to, _from, next) => {\n  firebase.auth().onAuthStateChanged((userAuth) => {\n    if (userAuth) {\n      firebase\n        .auth()\n        .currentUser.getIdTokenResult()\n        .then(function ({ claims }) {\n          if (claims.patient) {\n            if (to.path !== \"/HomePagePatient\")\n              return next({\n                path: \"/HomePagePatient\",\n              });\n          } else if (claims.admin) {\n            if (to.path !== \"/HomePageKine\")\n              return next({\n                path: \"/HomePageKine\",\n              });\n          }\n        });\n    } else {\n      if (to.matched.some((record) => record.meta.auth)) {\n        next({\n          path: \"/Login\",\n          query: {\n            redirect: to.fullPath,\n          },\n        });\n      } else {\n        next();\n      }\n    }\n  });\n\n  next();\n});\n\nexport default router;\n"]}]}