{"remainingRequest":"/home/lost/Bureau/OCI/kineapp/node_modules/thread-loader/dist/cjs.js!/home/lost/Bureau/OCI/kineapp/node_modules/babel-loader/lib/index.js!/home/lost/Bureau/OCI/kineapp/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/lost/Bureau/OCI/kineapp/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/home/lost/Bureau/OCI/kineapp/src/views/HomePageKine.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/lost/Bureau/OCI/kineapp/src/views/HomePageKine.vue","mtime":1641747645673},{"path":"/home/lost/Bureau/OCI/kineapp/babel.config.js","mtime":1641732054737},{"path":"/home/lost/Bureau/OCI/kineapp/node_modules/cache-loader/dist/cjs.js","mtime":1640273572679},{"path":"/home/lost/Bureau/OCI/kineapp/node_modules/thread-loader/dist/cjs.js","mtime":1640273572664},{"path":"/home/lost/Bureau/OCI/kineapp/node_modules/babel-loader/lib/index.js","mtime":1639687650488},{"path":"/home/lost/Bureau/OCI/kineapp/node_modules/cache-loader/dist/cjs.js","mtime":1640273572679},{"path":"/home/lost/Bureau/OCI/kineapp/node_modules/vue-loader-v16/dist/index.js","mtime":1640273582176}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICIvaG9tZS9sb3N0L0J1cmVhdS9PQ0kva2luZWFwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCBmaXJlYmFzZSBmcm9tICJmaXJlYmFzZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiSG9tZVBhZ2VLaW5lIiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXNlcnM6IFtdLAogICAgICB1c2VyOiBudWxsCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgZmlyZWJhc2UuYXV0aCgpLm9uQXV0aFN0YXRlQ2hhbmdlZChmdW5jdGlvbiAodXNlcikgewogICAgICBzZWxmLnVzZXIgPSB1c2VyOwogICAgfSk7CiAgICB0aGlzLnVzZXJzID0gW107CiAgICBmaXJlYmFzZS5maXJlc3RvcmUoKS5jb2xsZWN0aW9uKCJyb2xlcyIpLmdldCgpLnRoZW4oZnVuY3Rpb24gKHNuYXApIHsKICAgICAgc25hcC5mb3JFYWNoKGZ1bmN0aW9uIChkb2MpIHsKICAgICAgICB2YXIgdXNlciA9IGRvYy5kYXRhKCk7CiAgICAgICAgdXNlci5pZCA9IGRvYy5pZDsKICAgICAgICBjb25zb2xlLmxvZyhkb2MuZGF0YSgpKTsKICAgICAgICBpZiAoIXVzZXIucm9sZS5hZG1pbikgX3RoaXMudXNlcnMucHVzaCh1c2VyKTsKICAgICAgfSk7CiAgICB9KTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHNpZ25vdXQ6IGZ1bmN0aW9uIHNpZ25vdXQoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgZmlyZWJhc2UuYXV0aCgpLnNpZ25PdXQoKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczIuJHJvdXRlci5wdXNoKCIvTG9naW4iKTsKICAgICAgfSk7CiAgICB9LAogICAgY2hhbmdlUm9sZTogZnVuY3Rpb24gY2hhbmdlUm9sZSh1aWQsIGV2ZW50KSB7CiAgICAgIHZhciBhZGRNZXNzYWdlID0gZmlyZWJhc2UuZnVuY3Rpb25zKCkuaHR0cHNDYWxsYWJsZSgic2V0VXNlclJvbGUiKTsKICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgdWlkOiB1aWQsCiAgICAgICAgcm9sZTogX2RlZmluZVByb3BlcnR5KHt9LCBldmVudC50YXJnZXQudmFsdWUsIHRydWUpCiAgICAgIH07CiAgICAgIGFkZE1lc3NhZ2UoZGF0YSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["/home/lost/Bureau/OCI/kineapp/src/views/HomePageKine.vue"],"names":[],"mappings":";;;AAkCA,OAAO,QAAP,MAAqB,UAArB;AAEA,eAAe;AACb,EAAA,IAAI,EAAE,cADO;AAEb,EAAA,IAFa,kBAEN;AACL,WAAO;AACL,MAAA,KAAK,EAAE,EADF;AAEL,MAAA,IAAI,EAAE;AAFD,KAAP;AAID,GAPY;AASb,EAAA,OATa,qBASH;AAAA;;AACR,QAAI,IAAG,GAAI,IAAX;AACA,IAAA,QAAQ,CAAC,IAAT,GAAgB,kBAAhB,CAAmC,UAAU,IAAV,EAAgB;AACjD,MAAA,IAAI,CAAC,IAAL,GAAY,IAAZ;AACD,KAFD;AAIA,SAAK,KAAL,GAAa,EAAb;AACA,IAAA,QAAO,CACJ,SADH,GAEG,UAFH,CAEc,OAFd,EAGG,GAHH,GAIG,IAJH,CAIQ,UAAC,IAAD,EAAU;AACd,MAAA,IAAI,CAAC,OAAL,CAAa,UAAC,GAAD,EAAS;AACpB,YAAI,IAAG,GAAI,GAAG,CAAC,IAAJ,EAAX;AACA,QAAA,IAAI,CAAC,EAAL,GAAU,GAAG,CAAC,EAAd;AACA,QAAA,OAAO,CAAC,GAAR,CAAY,GAAG,CAAC,IAAJ,EAAZ;AACA,YAAI,CAAC,IAAI,CAAC,IAAL,CAAU,KAAf,EAAsB,KAAI,CAAC,KAAL,CAAW,IAAX,CAAgB,IAAhB;AACvB,OALD;AAMD,KAXH;AAYD,GA5BY;AA6Bb,EAAA,OAAO,EAAE;AACP,IAAA,OADO,qBACG;AAAA;;AACR,MAAA,QAAO,CACJ,IADH,GAEG,OAFH,GAGG,IAHH,CAGQ,YAAM;AACV,QAAA,MAAI,CAAC,OAAL,CAAa,IAAb,CAAkB,QAAlB;AACD,OALH;AAMD,KARM;AASP,IAAA,UATO,sBASI,GATJ,EASS,KATT,EASgB;AACrB,UAAI,UAAS,GAAI,QAAQ,CAAC,SAAT,GAAqB,aAArB,CAAmC,aAAnC,CAAjB;AAEA,UAAI,IAAG,GAAI;AAAE,QAAA,GAAG,EAAE,GAAP;AAAY,QAAA,IAAI,sBAAK,KAAK,CAAC,MAAN,CAAa,KAAlB,EAA0B,IAA1B;AAAhB,OAAX;AAEA,MAAA,UAAU,CAAC,IAAD,CAAV,CACG,IADH,CACQ,UAAU,MAAV,EAAkB;AACtB,QAAA,OAAO,CAAC,GAAR,CAAY,MAAZ;AACD,OAHH,EAIG,KAJH,CAIS,UAAU,KAAV,EAAiB;AACtB,QAAA,OAAO,CAAC,GAAR,CAAY,KAAZ;AACD,OANH;AAOD;AArBM;AA7BI,CAAf","sourcesContent":["<template>\n  <section class=\"homePageKine\">\n    <div class=\"ui middle aligned center aligned grid\">\n      <div class=\"column\">\n        <h1>Admin</h1>\n        <p>User:{{ user.email }}</p>\n        <button class=\"ui pink submit button\" @click=\"signout\">Signout</button>\n        <table class=\"ui celled table\">\n          <thead>\n            <tr>\n              <th>Email</th>\n              <th>Role</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"user in users\" :key=\"user.id\">\n              <td data-label=\"Name\">{{ user.email }}</td>\n              <select @change=\"changeRole(user.id, $event)\">\n                <option :selected=\"user.role.driver\" value=\"driver\">\n                  Driver\n                </option>\n                <option :selected=\"user.role.customer\" value=\"customer\">\n                  Customer\n                </option>\n              </select>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n  </section>\n</template>\n\n<script>\nimport firebase from \"firebase\";\n\nexport default {\n  name: \"HomePageKine\",\n  data() {\n    return {\n      users: [],\n      user: null,\n    };\n  },\n\n  created() {\n    var self = this;\n    firebase.auth().onAuthStateChanged(function (user) {\n      self.user = user;\n    });\n\n    this.users = [];\n    firebase\n      .firestore()\n      .collection(\"roles\")\n      .get()\n      .then((snap) => {\n        snap.forEach((doc) => {\n          var user = doc.data();\n          user.id = doc.id;\n          console.log(doc.data());\n          if (!user.role.admin) this.users.push(user);\n        });\n      });\n  },\n  methods: {\n    signout() {\n      firebase\n        .auth()\n        .signOut()\n        .then(() => {\n          this.$router.push(\"/Login\");\n        });\n    },\n    changeRole(uid, event) {\n      var addMessage = firebase.functions().httpsCallable(\"setUserRole\");\n\n      var data = { uid: uid, role: { [event.target.value]: true } };\n\n      addMessage(data)\n        .then(function (result) {\n          console.log(result);\n        })\n        .catch(function (error) {\n          console.log(error);\n        });\n    },\n  },\n};\n</script>\n"],"sourceRoot":""}]}