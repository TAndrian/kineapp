{"remainingRequest":"/home/lost/Bureau/OCI/kineapp/node_modules/babel-loader/lib/index.js!/home/lost/Bureau/OCI/kineapp/node_modules/eslint-loader/index.js??ref--14-0!/home/lost/Bureau/OCI/kineapp/src/router/index.js","dependencies":[{"path":"/home/lost/Bureau/OCI/kineapp/src/router/index.js","mtime":1641931764789},{"path":"/home/lost/Bureau/OCI/kineapp/babel.config.js","mtime":1641732054737},{"path":"/home/lost/Bureau/OCI/kineapp/node_modules/cache-loader/dist/cjs.js","mtime":1640273572679},{"path":"/home/lost/Bureau/OCI/kineapp/node_modules/babel-loader/lib/index.js","mtime":1639687650488},{"path":"/home/lost/Bureau/OCI/kineapp/node_modules/eslint-loader/index.js","mtime":1640273580552}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCB7IGNyZWF0ZVJvdXRlciwgY3JlYXRlV2ViSGFzaEhpc3RvcnkgfSBmcm9tICJ2dWUtcm91dGVyIjsKaW1wb3J0IENvbm5leGlvbiBmcm9tICIuLi92aWV3cy9Db25uZXhpb24udnVlIjsKaW1wb3J0IEhvbWVQYWdlS2luZSBmcm9tICIuLi92aWV3cy9Ib21lUGFnZUtpbmUudnVlIjsKaW1wb3J0IEhvbWVQYWdlUGF0aWVudCBmcm9tICIuLi92aWV3cy9Ib21lUGFnZVBhdGllbnQudnVlIjsKaW1wb3J0IEVEVCBmcm9tICIuLi92aWV3cy9FRFQudnVlIjsKaW1wb3J0IEV4ZXJjaWNlIGZyb20gIi4uL3ZpZXdzL0V4ZXJjaWNlLnZ1ZSI7CmltcG9ydCBQYXRpZW50IGZyb20gIi4uL3ZpZXdzL1BhdGllbnQudnVlIjsKaW1wb3J0IFJEViBmcm9tICIuLi92aWV3cy9SRFYudnVlIjsKaW1wb3J0IFBhZ2VQYXRpZW50Rm9ybXVsYWlyZSBmcm9tICIuLi92aWV3cy9QYWdlUGF0aWVudEZvcm11bGFpcmUudnVlIjsKaW1wb3J0IFJlZ2lzdGVyIGZyb20gIi4uL2NvbXBvbmVudHMvUmVnaXN0ZXIudnVlIjsKaW1wb3J0IExvZ2luIGZyb20gIi4uL2NvbXBvbmVudHMvTG9naW4udnVlIjsKaW1wb3J0IGZpcmViYXNlIGZyb20gImZpcmViYXNlIjsKdmFyIHJvdXRlcyA9IFt7CiAgcGF0aDogIi8iLAogIG5hbWU6ICJDb25uZXhpb24iLAogIGNvbXBvbmVudDogQ29ubmV4aW9uCn0sIHsKICBwYXRoOiAiL1JlZ2lzdGVyIiwKICBuYW1lOiAiUmVnaXN0ZXIiLAogIGNvbXBvbmVudDogUmVnaXN0ZXIsCiAgbWV0YTogewogICAgZ3Vlc3Q6IHRydWUKICB9Cn0sIHsKICBwYXRoOiAiL0xvZ2luIiwKICBuYW1lOiAiTG9naW4iLAogIGNvbXBvbmVudDogTG9naW4sCiAgbWV0YTogewogICAgZ3Vlc3Q6IHRydWUKICB9Cn0sIHsKICBwYXRoOiAiL1BhZ2VQYXRpZW50Rm9ybXVsYWlyZSIsCiAgbmFtZTogIlBhZ2VQYXRpZW50Rm9ybXVsYWlyZSIsCiAgY29tcG9uZW50OiBQYWdlUGF0aWVudEZvcm11bGFpcmUKfSwgewogIHBhdGg6ICIvSG9tZVBhZ2VLaW5lIiwKICBuYW1lOiAiSG9tZVBhZ2VLaW5lIiwKICBjb21wb25lbnQ6IEhvbWVQYWdlS2luZSwKICBtZXRhOiB7CiAgICBhdXRoOiB0cnVlCiAgfSwKICBjaGlsZHJlbjogW3sKICAgIHBhdGg6ICIvUkRWIiwKICAgIG5hbWU6ICJSRFYiLAogICAgY29tcG9uZW50OiBSRFYKICB9LCB7CiAgICBwYXRoOiAiL0VEVCIsCiAgICBuYW1lOiAiRURUIiwKICAgIGNvbXBvbmVudDogRURUCiAgfSwgewogICAgcGF0aDogIi9FeGVyY2ljZSIsCiAgICBuYW1lOiAiRXhlcmNpY2UiLAogICAgY29tcG9uZW50OiBFeGVyY2ljZQogIH0sIHsKICAgIHBhdGg6ICIvUGF0aWVudCIsCiAgICBuYW1lOiAiUGF0aWVudCIsCiAgICBjb21wb25lbnQ6IFBhdGllbnQKICB9XQp9LCB7CiAgcGF0aDogIi9Ib21lUGFnZVBhdGllbnQiLAogIG5hbWU6ICJIb21lUGFnZVBhdGllbnQiLAogIGNvbXBvbmVudDogSG9tZVBhZ2VQYXRpZW50LAogIG1ldGE6IHsKICAgIGF1dGg6IHRydWUKICB9Cn1dOwp2YXIgcm91dGVyID0gY3JlYXRlUm91dGVyKHsKICBoaXN0b3J5OiBjcmVhdGVXZWJIYXNoSGlzdG9yeSgpLAogIHJvdXRlczogcm91dGVzCn0pOwpyb3V0ZXIuYmVmb3JlRWFjaChmdW5jdGlvbiAodG8sIF9mcm9tLCBuZXh0KSB7CiAgZmlyZWJhc2UuYXV0aCgpLm9uQXV0aFN0YXRlQ2hhbmdlZChmdW5jdGlvbiAodXNlckF1dGgpIHsKICAgIGlmICh1c2VyQXV0aCkgewogICAgICBmaXJlYmFzZS5hdXRoKCkuY3VycmVudFVzZXIuZ2V0SWRUb2tlblJlc3VsdCgpLnRoZW4oZnVuY3Rpb24gKF9yZWYpIHsKICAgICAgICB2YXIgY2xhaW1zID0gX3JlZi5jbGFpbXM7CgogICAgICAgIGlmIChjbGFpbXMucGF0aWVudCkgewogICAgICAgICAgaWYgKHRvLnBhdGggIT09ICIvSG9tZVBhZ2VQYXRpZW50IikgcmV0dXJuIG5leHQoewogICAgICAgICAgICBwYXRoOiAiL0hvbWVQYWdlUGF0aWVudCIKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSBpZiAoY2xhaW1zLmFkbWluKSB7CiAgICAgICAgICBpZiAodG8ucGF0aCAhPT0gIi9Ib21lUGFnZUtpbmUiKSByZXR1cm4gbmV4dCh7CiAgICAgICAgICAgIHBhdGg6ICIvSG9tZVBhZ2VLaW5lIgogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIGlmICh0by5tYXRjaGVkLnNvbWUoZnVuY3Rpb24gKHJlY29yZCkgewogICAgICAgIHJldHVybiByZWNvcmQubWV0YS5hdXRoOwogICAgICB9KSkgewogICAgICAgIG5leHQoewogICAgICAgICAgcGF0aDogIi9Mb2dpbiIsCiAgICAgICAgICBxdWVyeTogewogICAgICAgICAgICByZWRpcmVjdDogdG8uZnVsbFBhdGgKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBuZXh0KCk7CiAgICAgIH0KICAgIH0KICB9KTsKICBuZXh0KCk7Cn0pOwpleHBvcnQgZGVmYXVsdCByb3V0ZXI7"},{"version":3,"sources":["/home/lost/Bureau/OCI/kineapp/src/router/index.js"],"names":["createRouter","createWebHashHistory","Connexion","HomePageKine","HomePagePatient","EDT","Exercice","Patient","RDV","PagePatientFormulaire","Register","Login","firebase","routes","path","name","component","meta","guest","auth","children","router","history","beforeEach","to","_from","next","onAuthStateChanged","userAuth","currentUser","getIdTokenResult","then","claims","patient","admin","matched","some","record","query","redirect","fullPath"],"mappings":";AAAA,SAASA,YAAT,EAAuBC,oBAAvB,QAAmD,YAAnD;AACA,OAAOC,SAAP,MAAsB,wBAAtB;AACA,OAAOC,YAAP,MAAyB,2BAAzB;AACA,OAAOC,eAAP,MAA4B,8BAA5B;AACA,OAAOC,GAAP,MAAgB,kBAAhB;AACA,OAAOC,QAAP,MAAqB,uBAArB;AACA,OAAOC,OAAP,MAAoB,sBAApB;AACA,OAAOC,GAAP,MAAgB,kBAAhB;AACA,OAAOC,qBAAP,MAAkC,oCAAlC;AAEA,OAAOC,QAAP,MAAqB,4BAArB;AACA,OAAOC,KAAP,MAAkB,yBAAlB;AACA,OAAOC,QAAP,MAAqB,UAArB;AAEA,IAAMC,MAAM,GAAG,CACb;AACEC,EAAAA,IAAI,EAAE,GADR;AAEEC,EAAAA,IAAI,EAAE,WAFR;AAGEC,EAAAA,SAAS,EAAEd;AAHb,CADa,EAMb;AACEY,EAAAA,IAAI,EAAE,WADR;AAEEC,EAAAA,IAAI,EAAE,UAFR;AAGEC,EAAAA,SAAS,EAAEN,QAHb;AAIEO,EAAAA,IAAI,EAAE;AACJC,IAAAA,KAAK,EAAE;AADH;AAJR,CANa,EAeb;AACEJ,EAAAA,IAAI,EAAE,QADR;AAEEC,EAAAA,IAAI,EAAE,OAFR;AAGEC,EAAAA,SAAS,EAAEL,KAHb;AAIEM,EAAAA,IAAI,EAAE;AACJC,IAAAA,KAAK,EAAE;AADH;AAJR,CAfa,EAwBb;AACEJ,EAAAA,IAAI,EAAE,wBADR;AAEEC,EAAAA,IAAI,EAAE,uBAFR;AAGEC,EAAAA,SAAS,EAAEP;AAHb,CAxBa,EA8Bb;AACEK,EAAAA,IAAI,EAAE,eADR;AAEEC,EAAAA,IAAI,EAAE,cAFR;AAGEC,EAAAA,SAAS,EAAEb,YAHb;AAIEc,EAAAA,IAAI,EAAE;AACJE,IAAAA,IAAI,EAAE;AADF,GAJR;AAOEC,EAAAA,QAAQ,EAAE,CACR;AACEN,IAAAA,IAAI,EAAE,MADR;AAEEC,IAAAA,IAAI,EAAE,KAFR;AAGEC,IAAAA,SAAS,EAAER;AAHb,GADQ,EAMR;AACEM,IAAAA,IAAI,EAAE,MADR;AAEEC,IAAAA,IAAI,EAAE,KAFR;AAGEC,IAAAA,SAAS,EAAEX;AAHb,GANQ,EAWR;AACES,IAAAA,IAAI,EAAE,WADR;AAEEC,IAAAA,IAAI,EAAE,UAFR;AAGEC,IAAAA,SAAS,EAAEV;AAHb,GAXQ,EAgBR;AACEQ,IAAAA,IAAI,EAAE,UADR;AAEEC,IAAAA,IAAI,EAAE,SAFR;AAGEC,IAAAA,SAAS,EAAET;AAHb,GAhBQ;AAPZ,CA9Ba,EA6Db;AACEO,EAAAA,IAAI,EAAE,kBADR;AAEEC,EAAAA,IAAI,EAAE,iBAFR;AAGEC,EAAAA,SAAS,EAAEZ,eAHb;AAIEa,EAAAA,IAAI,EAAE;AACJE,IAAAA,IAAI,EAAE;AADF;AAJR,CA7Da,CAAf;AAuEA,IAAME,MAAM,GAAGrB,YAAY,CAAC;AAC1BsB,EAAAA,OAAO,EAAErB,oBAAoB,EADH;AAE1BY,EAAAA,MAAM,EAANA;AAF0B,CAAD,CAA3B;AAKAQ,MAAM,CAACE,UAAP,CAAkB,UAACC,EAAD,EAAKC,KAAL,EAAYC,IAAZ,EAAqB;AACrCd,EAAAA,QAAQ,CAACO,IAAT,GAAgBQ,kBAAhB,CAAmC,UAACC,QAAD,EAAc;AAC/C,QAAIA,QAAJ,EAAc;AACZhB,MAAAA,QAAQ,CACLO,IADH,GAEGU,WAFH,CAEeC,gBAFf,GAGGC,IAHH,CAGQ,gBAAsB;AAAA,YAAVC,MAAU,QAAVA,MAAU;;AAC1B,YAAIA,MAAM,CAACC,OAAX,EAAoB;AAClB,cAAIT,EAAE,CAACV,IAAH,KAAY,kBAAhB,EACE,OAAOY,IAAI,CAAC;AACVZ,YAAAA,IAAI,EAAE;AADI,WAAD,CAAX;AAGH,SALD,MAKO,IAAIkB,MAAM,CAACE,KAAX,EAAkB;AACvB,cAAIV,EAAE,CAACV,IAAH,KAAY,eAAhB,EACE,OAAOY,IAAI,CAAC;AACVZ,YAAAA,IAAI,EAAE;AADI,WAAD,CAAX;AAGH;AACF,OAfH;AAgBD,KAjBD,MAiBO;AACL,UAAIU,EAAE,CAACW,OAAH,CAAWC,IAAX,CAAgB,UAACC,MAAD;AAAA,eAAYA,MAAM,CAACpB,IAAP,CAAYE,IAAxB;AAAA,OAAhB,CAAJ,EAAmD;AACjDO,QAAAA,IAAI,CAAC;AACHZ,UAAAA,IAAI,EAAE,QADH;AAEHwB,UAAAA,KAAK,EAAE;AACLC,YAAAA,QAAQ,EAAEf,EAAE,CAACgB;AADR;AAFJ,SAAD,CAAJ;AAMD,OAPD,MAOO;AACLd,QAAAA,IAAI;AACL;AACF;AACF,GA9BD;AAgCAA,EAAAA,IAAI;AACL,CAlCD;AAoCA,eAAeL,MAAf","sourcesContent":["import { createRouter, createWebHashHistory } from \"vue-router\";\nimport Connexion from \"../views/Connexion.vue\";\nimport HomePageKine from \"../views/HomePageKine.vue\";\nimport HomePagePatient from \"../views/HomePagePatient.vue\";\nimport EDT from \"../views/EDT.vue\";\nimport Exercice from \"../views/Exercice.vue\";\nimport Patient from \"../views/Patient.vue\";\nimport RDV from \"../views/RDV.vue\";\nimport PagePatientFormulaire from \"../views/PagePatientFormulaire.vue\";\n\nimport Register from \"../components/Register.vue\";\nimport Login from \"../components/Login.vue\";\nimport firebase from \"firebase\";\n\nconst routes = [\n  {\n    path: \"/\",\n    name: \"Connexion\",\n    component: Connexion,\n  },\n  {\n    path: \"/Register\",\n    name: \"Register\",\n    component: Register,\n    meta: {\n      guest: true,\n    },\n  },\n\n  {\n    path: \"/Login\",\n    name: \"Login\",\n    component: Login,\n    meta: {\n      guest: true,\n    },\n  },\n\n  {\n    path: \"/PagePatientFormulaire\",\n    name: \"PagePatientFormulaire\",\n    component: PagePatientFormulaire,\n  },\n\n  {\n    path: \"/HomePageKine\",\n    name: \"HomePageKine\",\n    component: HomePageKine,\n    meta: {\n      auth: true,\n    },\n    children: [\n      {\n        path: \"/RDV\",\n        name: \"RDV\",\n        component: RDV,\n      },\n      {\n        path: \"/EDT\",\n        name: \"EDT\",\n        component: EDT,\n      },\n      {\n        path: \"/Exercice\",\n        name: \"Exercice\",\n        component: Exercice,\n      },\n      {\n        path: \"/Patient\",\n        name: \"Patient\",\n        component: Patient,\n      },\n    ],\n  },\n\n  {\n    path: \"/HomePagePatient\",\n    name: \"HomePagePatient\",\n    component: HomePagePatient,\n    meta: {\n      auth: true,\n    },\n  },\n];\n\nconst router = createRouter({\n  history: createWebHashHistory(),\n  routes,\n});\n\nrouter.beforeEach((to, _from, next) => {\n  firebase.auth().onAuthStateChanged((userAuth) => {\n    if (userAuth) {\n      firebase\n        .auth()\n        .currentUser.getIdTokenResult()\n        .then(function ({ claims }) {\n          if (claims.patient) {\n            if (to.path !== \"/HomePagePatient\")\n              return next({\n                path: \"/HomePagePatient\",\n              });\n          } else if (claims.admin) {\n            if (to.path !== \"/HomePageKine\")\n              return next({\n                path: \"/HomePageKine\",\n              });\n          }\n        });\n    } else {\n      if (to.matched.some((record) => record.meta.auth)) {\n        next({\n          path: \"/Login\",\n          query: {\n            redirect: to.fullPath,\n          },\n        });\n      } else {\n        next();\n      }\n    }\n  });\n\n  next();\n});\n\nexport default router;\n"]}]}