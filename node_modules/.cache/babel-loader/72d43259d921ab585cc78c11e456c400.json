{"remainingRequest":"/home/lost/Bureau/OCI/kineapp/node_modules/thread-loader/dist/cjs.js!/home/lost/Bureau/OCI/kineapp/node_modules/babel-loader/lib/index.js!/home/lost/Bureau/OCI/kineapp/node_modules/eslint-loader/index.js??ref--14-0!/home/lost/Bureau/OCI/kineapp/src/router/index.js","dependencies":[{"path":"/home/lost/Bureau/OCI/kineapp/src/router/index.js","mtime":1641746693557},{"path":"/home/lost/Bureau/OCI/kineapp/babel.config.js","mtime":1641732054737},{"path":"/home/lost/Bureau/OCI/kineapp/node_modules/cache-loader/dist/cjs.js","mtime":1640273572679},{"path":"/home/lost/Bureau/OCI/kineapp/node_modules/thread-loader/dist/cjs.js","mtime":1640273572664},{"path":"/home/lost/Bureau/OCI/kineapp/node_modules/babel-loader/lib/index.js","mtime":1639687650488},{"path":"/home/lost/Bureau/OCI/kineapp/node_modules/eslint-loader/index.js","mtime":1640273580552}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCB7IGNyZWF0ZVJvdXRlciwgY3JlYXRlV2ViSGFzaEhpc3RvcnkgfSBmcm9tICJ2dWUtcm91dGVyIjsKaW1wb3J0IENvbm5leGlvbiBmcm9tICIuLi92aWV3cy9Db25uZXhpb24udnVlIjsKaW1wb3J0IEhvbWVQYWdlS2luZSBmcm9tICIuLi92aWV3cy9Ib21lUGFnZUtpbmUudnVlIjsKaW1wb3J0IEhvbWVQYWdlUGF0aWVudCBmcm9tICIuLi92aWV3cy9Ib21lUGFnZVBhdGllbnQudnVlIjsKaW1wb3J0IFJlZ2lzdGVyIGZyb20gIi4uL2NvbXBvbmVudHMvUmVnaXN0ZXIudnVlIjsKaW1wb3J0IExvZ2luIGZyb20gIi4uL2NvbXBvbmVudHMvTG9naW4udnVlIjsKaW1wb3J0IGZpcmViYXNlIGZyb20gImZpcmViYXNlIjsKdmFyIHJvdXRlcyA9IFt7CiAgcGF0aDogIi8iLAogIG5hbWU6ICJDb25uZXhpb24iLAogIGNvbXBvbmVudDogQ29ubmV4aW9uCn0sIHsKICBwYXRoOiAiL1JlZ2lzdGVyIiwKICBuYW1lOiAiUmVnaXN0ZXIiLAogIGNvbXBvbmVudDogUmVnaXN0ZXIsCiAgbWV0YTogewogICAgZ3Vlc3Q6IHRydWUKICB9Cn0sIHsKICBwYXRoOiAiL0xvZ2luIiwKICBuYW1lOiAiTG9naW4iLAogIGNvbXBvbmVudDogTG9naW4sCiAgbWV0YTogewogICAgZ3Vlc3Q6IHRydWUKICB9Cn0sIHsKICBwYXRoOiAiL0hvbWVQYWdlS2luZSIsCiAgbmFtZTogIkhvbWVQYWdlS2luZSIsCiAgY29tcG9uZW50OiBIb21lUGFnZUtpbmUsCiAgbWV0YTogewogICAgYXV0aDogdHJ1ZQogIH0KfSwgewogIHBhdGg6ICIvSG9tZVBhZ2VQYXRpZW50IiwKICBuYW1lOiAiSG9tZVBhZ2VQYXRpZW50IiwKICBjb21wb25lbnQ6IEhvbWVQYWdlUGF0aWVudCwKICBtZXRhOiB7CiAgICBhdXRoOiB0cnVlCiAgfQp9XTsKdmFyIHJvdXRlciA9IGNyZWF0ZVJvdXRlcih7CiAgaGlzdG9yeTogY3JlYXRlV2ViSGFzaEhpc3RvcnkoKSwKICByb3V0ZXM6IHJvdXRlcwp9KTsKcm91dGVyLmJlZm9yZUVhY2goZnVuY3Rpb24gKHRvLCBfZnJvbSwgbmV4dCkgewogIGZpcmViYXNlLmF1dGgoKS5vbkF1dGhTdGF0ZUNoYW5nZWQoZnVuY3Rpb24gKHVzZXJBdXRoKSB7CiAgICBpZiAodXNlckF1dGgpIHsKICAgICAgZmlyZWJhc2UuYXV0aCgpLmN1cnJlbnRVc2VyLmdldElkVG9rZW5SZXN1bHQoKS50aGVuKGZ1bmN0aW9uIChfcmVmKSB7CiAgICAgICAgdmFyIGNsYWltcyA9IF9yZWYuY2xhaW1zOwoKICAgICAgICBpZiAoY2xhaW1zLnBhdGllbnQpIHsKICAgICAgICAgIGlmICh0by5wYXRoICE9PSAiL0hvbWVQYWdlUGF0aWVudCIpIHJldHVybiBuZXh0KHsKICAgICAgICAgICAgcGF0aDogIi9Ib21lUGFnZVBhdGllbnQiCiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgaWYgKGNsYWltcy5hZG1pbikgewogICAgICAgICAgaWYgKHRvLnBhdGggIT09ICIvSG9tZVBhZ2VLaW5lIikgcmV0dXJuIG5leHQoewogICAgICAgICAgICBwYXRoOiAiL0hvbWVQYWdlS2luZSIKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICBpZiAodG8ubWF0Y2hlZC5zb21lKGZ1bmN0aW9uIChyZWNvcmQpIHsKICAgICAgICByZXR1cm4gcmVjb3JkLm1ldGEuYXV0aDsKICAgICAgfSkpIHsKICAgICAgICBuZXh0KHsKICAgICAgICAgIHBhdGg6ICIvTG9naW4iLAogICAgICAgICAgcXVlcnk6IHsKICAgICAgICAgICAgcmVkaXJlY3Q6IHRvLmZ1bGxQYXRoCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbmV4dCgpOwogICAgICB9CiAgICB9CiAgfSk7CiAgbmV4dCgpOwp9KTsKZXhwb3J0IGRlZmF1bHQgcm91dGVyOw=="},{"version":3,"sources":["/home/lost/Bureau/OCI/kineapp/src/router/index.js"],"names":["createRouter","createWebHashHistory","Connexion","HomePageKine","HomePagePatient","Register","Login","firebase","routes","path","name","component","meta","guest","auth","router","history","beforeEach","to","_from","next","onAuthStateChanged","userAuth","currentUser","getIdTokenResult","then","claims","patient","admin","matched","some","record","query","redirect","fullPath"],"mappings":";AAAA,SAASA,YAAT,EAAuBC,oBAAvB,QAAmD,YAAnD;AACA,OAAOC,SAAP,MAAsB,wBAAtB;AACA,OAAOC,YAAP,MAAyB,2BAAzB;AACA,OAAOC,eAAP,MAA4B,8BAA5B;AAEA,OAAOC,QAAP,MAAqB,4BAArB;AACA,OAAOC,KAAP,MAAkB,yBAAlB;AACA,OAAOC,QAAP,MAAqB,UAArB;AAEA,IAAMC,MAAM,GAAG,CACb;AACEC,EAAAA,IAAI,EAAE,GADR;AAEEC,EAAAA,IAAI,EAAE,WAFR;AAGEC,EAAAA,SAAS,EAAET;AAHb,CADa,EAMb;AACEO,EAAAA,IAAI,EAAE,WADR;AAEEC,EAAAA,IAAI,EAAE,UAFR;AAGEC,EAAAA,SAAS,EAAEN,QAHb;AAIEO,EAAAA,IAAI,EAAE;AACJC,IAAAA,KAAK,EAAE;AADH;AAJR,CANa,EAeb;AACEJ,EAAAA,IAAI,EAAE,QADR;AAEEC,EAAAA,IAAI,EAAE,OAFR;AAGEC,EAAAA,SAAS,EAAEL,KAHb;AAIEM,EAAAA,IAAI,EAAE;AACJC,IAAAA,KAAK,EAAE;AADH;AAJR,CAfa,EAwBb;AACEJ,EAAAA,IAAI,EAAE,eADR;AAEEC,EAAAA,IAAI,EAAE,cAFR;AAGEC,EAAAA,SAAS,EAAER,YAHb;AAIES,EAAAA,IAAI,EAAE;AACJE,IAAAA,IAAI,EAAE;AADF;AAJR,CAxBa,EAiCb;AACEL,EAAAA,IAAI,EAAE,kBADR;AAEEC,EAAAA,IAAI,EAAE,iBAFR;AAGEC,EAAAA,SAAS,EAAEP,eAHb;AAIEQ,EAAAA,IAAI,EAAE;AACJE,IAAAA,IAAI,EAAE;AADF;AAJR,CAjCa,CAAf;AA2CA,IAAMC,MAAM,GAAGf,YAAY,CAAC;AAC1BgB,EAAAA,OAAO,EAAEf,oBAAoB,EADH;AAE1BO,EAAAA,MAAM,EAANA;AAF0B,CAAD,CAA3B;AAKAO,MAAM,CAACE,UAAP,CAAkB,UAACC,EAAD,EAAKC,KAAL,EAAYC,IAAZ,EAAqB;AACrCb,EAAAA,QAAQ,CAACO,IAAT,GAAgBO,kBAAhB,CAAmC,UAACC,QAAD,EAAc;AAC/C,QAAIA,QAAJ,EAAc;AACZf,MAAAA,QAAQ,CACLO,IADH,GAEGS,WAFH,CAEeC,gBAFf,GAGGC,IAHH,CAGQ,gBAAsB;AAAA,YAAVC,MAAU,QAAVA,MAAU;;AAC1B,YAAIA,MAAM,CAACC,OAAX,EAAoB;AAClB,cAAIT,EAAE,CAACT,IAAH,KAAY,kBAAhB,EACE,OAAOW,IAAI,CAAC;AACVX,YAAAA,IAAI,EAAE;AADI,WAAD,CAAX;AAGH,SALD,MAKO,IAAIiB,MAAM,CAACE,KAAX,EAAkB;AACvB,cAAIV,EAAE,CAACT,IAAH,KAAY,eAAhB,EACE,OAAOW,IAAI,CAAC;AACVX,YAAAA,IAAI,EAAE;AADI,WAAD,CAAX;AAGH;AACF,OAfH;AAgBD,KAjBD,MAiBO;AACL,UAAIS,EAAE,CAACW,OAAH,CAAWC,IAAX,CAAgB,UAACC,MAAD;AAAA,eAAYA,MAAM,CAACnB,IAAP,CAAYE,IAAxB;AAAA,OAAhB,CAAJ,EAAmD;AACjDM,QAAAA,IAAI,CAAC;AACHX,UAAAA,IAAI,EAAE,QADH;AAEHuB,UAAAA,KAAK,EAAE;AACLC,YAAAA,QAAQ,EAAEf,EAAE,CAACgB;AADR;AAFJ,SAAD,CAAJ;AAMD,OAPD,MAOO;AACLd,QAAAA,IAAI;AACL;AACF;AACF,GA9BD;AAgCAA,EAAAA,IAAI;AACL,CAlCD;AAoCA,eAAeL,MAAf","sourcesContent":["import { createRouter, createWebHashHistory } from \"vue-router\";\nimport Connexion from \"../views/Connexion.vue\";\nimport HomePageKine from \"../views/HomePageKine.vue\";\nimport HomePagePatient from \"../views/HomePagePatient.vue\";\n\nimport Register from \"../components/Register.vue\";\nimport Login from \"../components/Login.vue\";\nimport firebase from \"firebase\";\n\nconst routes = [\n  {\n    path: \"/\",\n    name: \"Connexion\",\n    component: Connexion,\n  },\n  {\n    path: \"/Register\",\n    name: \"Register\",\n    component: Register,\n    meta: {\n      guest: true,\n    },\n  },\n\n  {\n    path: \"/Login\",\n    name: \"Login\",\n    component: Login,\n    meta: {\n      guest: true,\n    },\n  },\n\n  {\n    path: \"/HomePageKine\",\n    name: \"HomePageKine\",\n    component: HomePageKine,\n    meta: {\n      auth: true,\n    },\n  },\n\n  {\n    path: \"/HomePagePatient\",\n    name: \"HomePagePatient\",\n    component: HomePagePatient,\n    meta: {\n      auth: true,\n    },\n  },\n];\n\nconst router = createRouter({\n  history: createWebHashHistory(),\n  routes,\n});\n\nrouter.beforeEach((to, _from, next) => {\n  firebase.auth().onAuthStateChanged((userAuth) => {\n    if (userAuth) {\n      firebase\n        .auth()\n        .currentUser.getIdTokenResult()\n        .then(function ({ claims }) {\n          if (claims.patient) {\n            if (to.path !== \"/HomePagePatient\")\n              return next({\n                path: \"/HomePagePatient\",\n              });\n          } else if (claims.admin) {\n            if (to.path !== \"/HomePageKine\")\n              return next({\n                path: \"/HomePageKine\",\n              });\n          }\n        });\n    } else {\n      if (to.matched.some((record) => record.meta.auth)) {\n        next({\n          path: \"/Login\",\n          query: {\n            redirect: to.fullPath,\n          },\n        });\n      } else {\n        next();\n      }\n    }\n  });\n\n  next();\n});\n\nexport default router;\n"]}]}