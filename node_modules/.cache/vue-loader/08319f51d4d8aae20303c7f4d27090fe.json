{"remainingRequest":"/home/lost/Bureau/OCI/kineapp/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/home/lost/Bureau/OCI/kineapp/src/views/HomePageKine.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/lost/Bureau/OCI/kineapp/src/views/HomePageKine.vue","mtime":1641747645673},{"path":"/home/lost/Bureau/OCI/kineapp/node_modules/cache-loader/dist/cjs.js","mtime":1640273572679},{"path":"/home/lost/Bureau/OCI/kineapp/node_modules/thread-loader/dist/cjs.js","mtime":1640273572664},{"path":"/home/lost/Bureau/OCI/kineapp/node_modules/babel-loader/lib/index.js","mtime":1639687650488},{"path":"/home/lost/Bureau/OCI/kineapp/node_modules/cache-loader/dist/cjs.js","mtime":1640273572679},{"path":"/home/lost/Bureau/OCI/kineapp/node_modules/vue-loader-v16/dist/index.js","mtime":1640273582176}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBmaXJlYmFzZSBmcm9tICJmaXJlYmFzZSI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkhvbWVQYWdlS2luZSIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVzZXJzOiBbXSwKICAgICAgdXNlcjogbnVsbCwKICAgIH07CiAgfSwKCiAgY3JlYXRlZCgpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIGZpcmViYXNlLmF1dGgoKS5vbkF1dGhTdGF0ZUNoYW5nZWQoZnVuY3Rpb24gKHVzZXIpIHsKICAgICAgc2VsZi51c2VyID0gdXNlcjsKICAgIH0pOwoKICAgIHRoaXMudXNlcnMgPSBbXTsKICAgIGZpcmViYXNlCiAgICAgIC5maXJlc3RvcmUoKQogICAgICAuY29sbGVjdGlvbigicm9sZXMiKQogICAgICAuZ2V0KCkKICAgICAgLnRoZW4oKHNuYXApID0+IHsKICAgICAgICBzbmFwLmZvckVhY2goKGRvYykgPT4gewogICAgICAgICAgdmFyIHVzZXIgPSBkb2MuZGF0YSgpOwogICAgICAgICAgdXNlci5pZCA9IGRvYy5pZDsKICAgICAgICAgIGNvbnNvbGUubG9nKGRvYy5kYXRhKCkpOwogICAgICAgICAgaWYgKCF1c2VyLnJvbGUuYWRtaW4pIHRoaXMudXNlcnMucHVzaCh1c2VyKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBzaWdub3V0KCkgewogICAgICBmaXJlYmFzZQogICAgICAgIC5hdXRoKCkKICAgICAgICAuc2lnbk91dCgpCiAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9Mb2dpbiIpOwogICAgICAgIH0pOwogICAgfSwKICAgIGNoYW5nZVJvbGUodWlkLCBldmVudCkgewogICAgICB2YXIgYWRkTWVzc2FnZSA9IGZpcmViYXNlLmZ1bmN0aW9ucygpLmh0dHBzQ2FsbGFibGUoInNldFVzZXJSb2xlIik7CgogICAgICB2YXIgZGF0YSA9IHsgdWlkOiB1aWQsIHJvbGU6IHsgW2V2ZW50LnRhcmdldC52YWx1ZV06IHRydWUgfSB9OwoKICAgICAgYWRkTWVzc2FnZShkYXRhKQogICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgfSk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["/home/lost/Bureau/OCI/kineapp/src/views/HomePageKine.vue"],"names":[],"mappings":"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","file":"/home/lost/Bureau/OCI/kineapp/src/views/HomePageKine.vue","sourceRoot":"","sourcesContent":["<template>\n  <section class=\"homePageKine\">\n    <div class=\"ui middle aligned center aligned grid\">\n      <div class=\"column\">\n        <h1>Admin</h1>\n        <p>User:{{ user.email }}</p>\n        <button class=\"ui pink submit button\" @click=\"signout\">Signout</button>\n        <table class=\"ui celled table\">\n          <thead>\n            <tr>\n              <th>Email</th>\n              <th>Role</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"user in users\" :key=\"user.id\">\n              <td data-label=\"Name\">{{ user.email }}</td>\n              <select @change=\"changeRole(user.id, $event)\">\n                <option :selected=\"user.role.driver\" value=\"driver\">\n                  Driver\n                </option>\n                <option :selected=\"user.role.customer\" value=\"customer\">\n                  Customer\n                </option>\n              </select>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n  </section>\n</template>\n\n<script>\nimport firebase from \"firebase\";\n\nexport default {\n  name: \"HomePageKine\",\n  data() {\n    return {\n      users: [],\n      user: null,\n    };\n  },\n\n  created() {\n    var self = this;\n    firebase.auth().onAuthStateChanged(function (user) {\n      self.user = user;\n    });\n\n    this.users = [];\n    firebase\n      .firestore()\n      .collection(\"roles\")\n      .get()\n      .then((snap) => {\n        snap.forEach((doc) => {\n          var user = doc.data();\n          user.id = doc.id;\n          console.log(doc.data());\n          if (!user.role.admin) this.users.push(user);\n        });\n      });\n  },\n  methods: {\n    signout() {\n      firebase\n        .auth()\n        .signOut()\n        .then(() => {\n          this.$router.push(\"/Login\");\n        });\n    },\n    changeRole(uid, event) {\n      var addMessage = firebase.functions().httpsCallable(\"setUserRole\");\n\n      var data = { uid: uid, role: { [event.target.value]: true } };\n\n      addMessage(data)\n        .then(function (result) {\n          console.log(result);\n        })\n        .catch(function (error) {\n          console.log(error);\n        });\n    },\n  },\n};\n</script>\n"]}]}